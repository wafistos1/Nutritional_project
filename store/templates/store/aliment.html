{% extends "base2.html" %}
{% load i18n %}
{% load static %}
{% block title %}
<title>{% trans 'Mes produits favoris' %} </title>

{% endblock title %}
{% block content %}


<main role="main">

  <section class="jumbotron text-center">
    <div class="container">
      <h2>{% trans 'Produits Favoris de' %} {{user.username}}</h2>
    </div>
  </section>

  <div class="album py-5 bg-light">
    <div class="container">
      <div class="row">
        {% for favorite in favorites%}
        <div class="col-md-4">
          <div class="card mb-4 shadow-sm">
            <img class="img-responsive" width="80%" height="225" src="{{ favorite.product_favorite.images  }}"
              preserveAspectRatio="xMidYMid slice" focusable="false" role="img" aria-label="Placeholder: Thumbnail">
            <div class="card-body">
              <h5>{{favorite.product_favorite.name|truncatewords:3 }}</h5>
            </div>
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center">
                <div class="btn-group">
                  <a href="{% url 'detail_favori' pk=favorite.pk %}"><button type="button"
                      class="btn btn-sm btn-outline-primary">Details</button>
                    </a>
                </div>
                <div>
                {% if favorite.product_favorite.grade == 'a' %}
                  {{ favorite.product_favorite.grade }}
                  <img class="img-responsive" width="100%" height="100" src="{% static 'img/nutriscore-a.svg'%}"
                    preserveAspectRatio="xMidYMid slice" focusable="false" role="img" aria-label="Placeholder: Thumbnail">
                  {%  elif favorite.product_favorite.grade == 'b' %}
                  <img class="img-responsive" width="100%" height="100" src="{% static 'img/nutriscore-b.svg'%}"
                    preserveAspectRatio="xMidYMid slice" focusable="false" role="img" aria-label="Placeholder: Thumbnail">
      
                  {%  elif favorite.product_favorite.grade == 'c' %}
                  <img class="img-responsive" width="100%" height="100" src="{% static 'img/nutriscore-c.svg'%}"
                    preserveAspectRatio="xMidYMid slice" focusable="false" role="img" aria-label="Placeholder: Thumbnail">
      
                  {%   else%}
                  <img class="img-responsive" width="100%" height="100" src="{% static 'img/nutriscore-e.svg'%}"
                    preserveAspectRatio="xMidYMid slice" focusable="false" role="img" aria-label="Placeholder: Thumbnail">
      
                  {% endif %}

                  <div class="rating"   >
                    {% for rate in rating %}
                        {% if favorite.product_favorite.pk == rate.product_rating.pk%}
                              {% if rate.rating == 1 %}
                              <span class="fa fa-star"></span>
                              <span class="fa fa-star"></span>
                              <span class="fa fa-star"></span>
                              <span class="fa fa-star"></span>
                              <span class="fa fa-star checked"></span>
                              {% elif rate.rating == 2 %}
                              <span class="fa fa-star"></span>
                              <span class="fa fa-star"></span>
                              <span class="fa fa-star"></span>
                              <span class="fa fa-star checked"></span>
                              <span class="fa fa-star checked"></span>
                              {% elif rate.rating == 3 %}
                          
                              <span class="fa fa-star"></span>
                              <span class="fa fa-star"></span>
                              <span class="fa fa-star checked"></span>
                              <span class="fa fa-star checked"></span>
                              <span class="fa fa-star checked"></span>
                              {% elif rate.rating == 4 %}
                              <span class="fa fa-star"></span>
                              <span class="fa fa-star checked"></span>
                              <span class="fa fa-star checked"></span>
                              <span class="fa fa-star checked"></span>
                              <span class="fa fa-star checked"></span>
                              
                              {% elif rate.rating == 5 %}
                              <span class="fa fa-star checked"></span>
                              <span class="fa fa-star checked"></span>
                              <span class="fa fa-star checked"></span>
                              <span class="fa fa-star checked"></span>
                              <span class="fa fa-star checked"></span>
                              {% else %}
                              <span class="fa fa-star"></span>
                              <span class="fa fa-star"></span>
                              <span class="fa fa-star"></span>                              
                              <span class="fa fa-star"></span>
                              <span class="fa fa-star"></span>

                              {% endif%}
                          {% endif %}
                    {% empty %}
                    <span class="fa fa-star"></span>
                    <span class="fa fa-star"></span>
                    <span class="fa fa-star"></span>                              
                    <span class="fa fa-star"></span>
                    <span class="fa fa-star"></span>
                    {% endfor %}

                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        {% endfor %}
      </div>
    </div>
  </div>

</main>


<script src="{% static 'js/script.js' %}"></script>
{% endblock %}
{% block content2%}
{% endblock content2%}